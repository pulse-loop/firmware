#![allow(clippy::excessive_precision)]

use static_fir::impl_fir;

// Implement a low-pass filter for the DC component.
// Passband: 0 - 0.2333 Hz, ripple: 2 dB
// Stopband: 0.6333 - 16.66665 Hz, attenuation: -40 dB
impl_fir!(
    DcFir,
    f32,
    145,
    [
        -0.003809978939314232,
        -0.0009303492096514681,
        -0.001035455068076163,
        -0.0011419392421846294,
        -0.0012488351658626403,
        -0.001355034489178717,
        -0.0014594800266738426,
        -0.001560554380947508,
        -0.0016571733053191973,
        -0.0017480535063129296,
        -0.0018315885999375407,
        -0.0019063329371910955,
        -0.00197084590863667,
        -0.0020232635827023664,
        -0.002061673936096571,
        -0.002084947989121885,
        -0.002090867124030568,
        -0.002078391565377006,
        -0.0020456799012091697,
        -0.001991501274379855,
        -0.0019133060187775002,
        -0.001811110960348213,
        -0.001681681877381048,
        -0.0015251492258498412,
        -0.001340458754099863,
        -0.001125921900776419,
        -0.0008805033120522763,
        -0.0006035572408966932,
        -0.0002942089781595326,
        0.00004779490696657119,
        0.0004222561013094485,
        0.0008299263388373715,
        0.001271343028613585,
        0.001745205556668641,
        0.0022501637209470155,
        0.0027891294405355837,
        0.003356834585002072,
        0.003954969908036442,
        0.004581013577210527,
        0.005233936327083309,
        0.0059118165768939435,
        0.006613135384113452,
        0.0073352431690029835,
        0.008076068390640864,
        0.008833198389141941,
        0.009603938893363398,
        0.010385664335971797,
        0.011175631635037929,
        0.011970637208210004,
        0.01276736495964199,
        0.013562895975196927,
        0.014353616921226334,
        0.015136435579151697,
        0.015907603179112603,
        0.016666511555260756,
        0.01740030163610391,
        0.018123199624027347,
        0.018814950626932364,
        0.0194775254145299,
        0.020111605581803395,
        0.02071351307705814,
        0.021278447021695384,
        0.02180317157479284,
        0.02228528303320406,
        0.022722982246798043,
        0.02311487431117283,
        0.023459072493735612,
        0.023753252603364867,
        0.023995720154651325,
        0.02418561195416518,
        0.024321163767408994,
        0.024402885981043274,
        0.024430028288294624,
        0.024402885981043274,
        0.024321163767408994,
        0.02418561195416518,
        0.023995720154651325,
        0.023753252603364867,
        0.023459072493735612,
        0.02311487431117283,
        0.022722982246798043,
        0.02228528303320406,
        0.02180317157479284,
        0.021278447021695384,
        0.02071351307705814,
        0.020111605581803395,
        0.0194775254145299,
        0.018814950626932364,
        0.018123199624027347,
        0.01740030163610391,
        0.016666511555260756,
        0.015907603179112603,
        0.015136435579151697,
        0.014353616921226334,
        0.013562895975196927,
        0.01276736495964199,
        0.011970637208210004,
        0.011175631635037929,
        0.010385664335971797,
        0.009603938893363398,
        0.008833198389141941,
        0.008076068390640864,
        0.0073352431690029835,
        0.006613135384113452,
        0.0059118165768939435,
        0.005233936327083309,
        0.004581013577210527,
        0.003954969908036442,
        0.003356834585002072,
        0.0027891294405355837,
        0.0022501637209470155,
        0.001745205556668641,
        0.001271343028613585,
        0.0008299263388373715,
        0.0004222561013094485,
        0.00004779490696657119,
        -0.0002942089781595326,
        -0.0006035572408966932,
        -0.0008805033120522763,
        -0.001125921900776419,
        -0.001340458754099863,
        -0.0015251492258498412,
        -0.001681681877381048,
        -0.001811110960348213,
        -0.0019133060187775002,
        -0.001991501274379855,
        -0.0020456799012091697,
        -0.002078391565377006,
        -0.002090867124030568,
        -0.002084947989121885,
        -0.002061673936096571,
        -0.0020232635827023664,
        -0.00197084590863667,
        -0.0019063329371910955,
        -0.0018315885999375407,
        -0.0017480535063129296,
        -0.0016571733053191973,
        -0.001560554380947508,
        -0.0014594800266738426,
        -0.001355034489178717,
        -0.0012488351658626403,
        -0.0011419392421846294,
        -0.001035455068076163,
        -0.0009303492096514681,
        -0.003809978939314232
    ]
);

// Implement a band-pass filter for the AC component.
// Stopband: 0 - 0.3333 Hz, attenuation: -80 dB
// Passband: 0.8333 - 1.8333 Hz, ripple: 2 dB
// Stopband: 2.3333 - 16.66665 Hz, attenuation: -40 dB
impl_fir!(
    AcFir,
    f32,
    145,
    [
        -0.0025897712607513422,
        0.003992268741157085,
        0.003265535476523767,
        0.003229857341385861,
        0.003286612819411299,
        0.0031370683644313634,
        0.0026381583470047637,
        0.001741003982270561,
        0.0004775743523636569,
        -0.0010572378980015704,
        -0.0027173320166296528,
        -0.004321857453098999,
        -0.005685087036320115,
        -0.006638663084075019,
        -0.007057985228664649,
        -0.00688601814347676,
        -0.006141800678676788,
        -0.0049217773234016965,
        -0.003388752775708015,
        -0.0017496447014092697,
        -0.00022431581310922779,
        0.0009911922873960984,
        0.0017543099681275355,
        0.002001478805469478,
        0.0017643367279083797,
        0.0011663499648541886,
        0.0004059967798801578,
        -0.0002741371399378128,
        -0.0006279535238051931,
        -0.00044866129863717656,
        0.00038960443846936096,
        0.0019035231401122732,
        0.0039870110650596785,
        0.0064168564684731555,
        0.008883108785505484,
        0.011030446509518671,
        0.012511407748587503,
        0.013047682615624603,
        0.012481815744307035,
        0.01081334548426643,
        0.008207716535403487,
        0.0049847194631976585,
        0.001583637451239212,
        -0.0015103269970247295,
        -0.003837363235391393,
        -0.005036940864799006,
        -0.004932273322476192,
        -0.003560825593256932,
        -0.0012031205137016782,
        0.0016384585648072994,
        0.004314866408143943,
        0.006074448931271464,
        0.0062430524957277295,
        0.004263536279577295,
        -0.00015327693746267196,
        -0.006948074306327116,
        -0.015702643313721,
        -0.025643590558594838,
        -0.03570154123523943,
        -0.04462240373914209,
        -0.05111686356397584,
        -0.05402739823700514,
        -0.05248247674077341,
        -0.0460322256546239,
        -0.03473941942634975,
        -0.019207795535701927,
        -0.0005503335825230223,
        0.01970991726459302,
        0.039793402047090906,
        0.05785188224251792,
        0.0721720201013575,
        0.08136686610612368,
        0.0845355911961401,
        0.08136686610612368,
        0.0721720201013575,
        0.05785188224251792,
        0.039793402047090906,
        0.01970991726459302,
        -0.0005503335825230223,
        -0.019207795535701927,
        -0.03473941942634975,
        -0.0460322256546239,
        -0.05248247674077341,
        -0.05402739823700514,
        -0.05111686356397584,
        -0.04462240373914209,
        -0.03570154123523943,
        -0.025643590558594838,
        -0.015702643313721,
        -0.006948074306327116,
        -0.00015327693746267196,
        0.004263536279577295,
        0.0062430524957277295,
        0.006074448931271464,
        0.004314866408143943,
        0.0016384585648072994,
        -0.0012031205137016782,
        -0.003560825593256932,
        -0.004932273322476192,
        -0.005036940864799006,
        -0.003837363235391393,
        -0.0015103269970247295,
        0.001583637451239212,
        0.0049847194631976585,
        0.008207716535403487,
        0.01081334548426643,
        0.012481815744307035,
        0.013047682615624603,
        0.012511407748587503,
        0.011030446509518671,
        0.008883108785505484,
        0.0064168564684731555,
        0.0039870110650596785,
        0.0019035231401122732,
        0.00038960443846936096,
        -0.00044866129863717656,
        -0.0006279535238051931,
        -0.0002741371399378128,
        0.0004059967798801578,
        0.0011663499648541886,
        0.0017643367279083797,
        0.002001478805469478,
        0.0017543099681275355,
        0.0009911922873960984,
        -0.00022431581310922779,
        -0.0017496447014092697,
        -0.003388752775708015,
        -0.0049217773234016965,
        -0.006141800678676788,
        -0.00688601814347676,
        -0.007057985228664649,
        -0.006638663084075019,
        -0.005685087036320115,
        -0.004321857453098999,
        -0.0027173320166296528,
        -0.0010572378980015704,
        0.0004775743523636569,
        0.001741003982270561,
        0.0026381583470047637,
        0.0031370683644313634,
        0.003286612819411299,
        0.003229857341385861,
        0.003265535476523767,
        0.003992268741157085,
        -0.0025897712607513422
    ]
);

// Implement a moving average filter for the RR measurements.
impl_fir!(AverageFir, f32, 5, [0.2, 0.2, 0.2, 0.2, 0.2]);
